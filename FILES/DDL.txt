CREATE TABLE CUSTOMERS
(
	CUSTOMER_ID INTEGER,
	NAME VARCHAR(20),
	EMAIL VARCHAR(20),
	PHONE_NUM INTEGER,
	PASSWORD VARCHAR(15) CHECK ( LENGTH(PASSWORD)>=6 ),
	CONSTRAINT C_PK PRIMARY KEY (CUSTOMER_ID)
);



CREATE TABLE CART
(
	CART_ID NUMBER,
	CUSTOMER_ID NUMBER,
	CONSTRAINT CART_PK PRIMARY KEY (CART_ID),
	CONSTRAINT C_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS
);



CREATE TABLE FOOD
(
	FOOD_ID INTEGER,
	NAME VARCHAR(20),
	PRICE FLOAT,
	DESCRIPTION VARCHAR(50),
	PICTURE VARCHAR(80),
	CONSTRAINT F_PK PRIMARY KEY (FOOD_ID)
);



CREATE TABLE MANAGER
(
	MANAGER_ID INTEGER,
	NAME VARCHAR(20),
	EMAIL VARCHAR(20),
	PHONE_NUM INTEGER,
	PASSWORD VARCHAR(15),
	DOB DATE,
	ADDRESS VARCHAR(50),
	CONSTRAINT M_PK PRIMARY KEY (MANAGER_ID),
	CONSTRAINT PASS_LENGTH2 CHECK ( LENGTH(PASSWORD)>=6 )
);



CREATE TABLE JOB_TYPE
(
	JOB_ID INTEGER,
	JOB_NAME VARCHAR(15),
	CONSTRAINT J_PK PRIMARY KEY(JOB_ID)
);

	

CREATE TABLE EMPLOYEES
(
	EMPLOYEE_ID INTEGER,
	NAME VARCHAR(20),
	PHONE_NUM INTEGER,
	ADDRESS VARCHAR(50),
	JOB_ID INTEGER,
	SALARY INTEGER,
	CONSTRAINT E_PK PRIMARY KEY (EMPLOYEE_ID),
	CONSTRAINT J_FK FOREIGN KEY (JOB_ID) REFERENCES JOB_TYPE		
);
	


CREATE TABLE EXPENSE_CATEGORY
(
	CATEGORY_ID INTEGER,
	CATEGORY_NAME VARCHAR(15),
	CONSTRAINT CE_PK PRIMARY KEY(CATEGORY_ID)
);



CREATE TABLE EXPENSES
(
	EXPENSE_ID INTEGER,
	MANAGER_ID INTEGER,
	CATEGORY_ID INTEGER,
	AMOUNT FLOAT,
	DESCRIPTION VARCHAR(100),
	CONSTRAINT EX_PK PRIMARY KEY (EXPENSE_ID),
	CONSTRAINT M_FK FOREIGN KEY (MANAGER_ID) REFERENCES MANAGER,
	CONSTRAINT CE_FK FOREIGN KEY (CATEGORY_ID) REFERENCES EXPENSE_CATEGORY

);
	
	

CREATE TABLE CART_ITEMS
(
	ITEM_ID INTEGER,
	CART_ID INTEGER,
	FOOD_ID INTEGER,
	QUANTITY INTEGER,
	CONSTRAINT I_PK PRIMARY KEY (ITEM_ID),
	CONSTRAINT CART_FK FOREIGN KEY(CART_ID) REFERENCES CART,
	CONSTRAINT F_FK FOREIGN KEY(FOOD_ID) REFERENCES FOOD
);
	
	

CREATE TABLE ON_ORDER
(
	ORDER_ID INTEGER,
	CUSTOMER_ID INTEGER,
	DELIVARY_ADDRESS VARCHAR(100),
	TOTAL_BILL FLOAT,
	DATE_TIME TIMESTAMP,
	MANAGER_ID INTEGER,
	EMPLOYEE_ID INTEGER,
	CONSTRAINT O_PK PRIMARY KEY(ORDER_ID),
	CONSTRAINT M2_FK FOREIGN KEY(MANAGER_ID) REFERENCES MANAGER,
	CONSTRAINT E2_FK FOREIGN KEY(EMPLOYEE_ID) REFERENCES EMPLOYEES,
	CONSTRAINT C2_FK FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMERS
);


CREATE TABLE OFF_ORDER
(
	ORDER_ID INTEGER,
	TABLE_NO INTEGER,
	TOTAL_BILL FLOAT,
	DATE_TIME TIMESTAMP,
	MANAGER_ID INTEGER,
	EMPLOYEE_ID INTEGER,
	CONSTRAINT O2_PK PRIMARY KEY(ORDER_ID),
	CONSTRAINT M3_FK FOREIGN KEY(MANAGER_ID) REFERENCES MANAGER,
	CONSTRAINT E3_FK FOREIGN KEY(EMPLOYEE_ID) REFERENCES EMPLOYEES
);


CREATE TABLE ORDERED_ITEMS
(
	ITEM_ID INTEGER,
	ORDER_ID INTEGER,
	FOOD_ID INTEGER,
	QUANTITY INTEGER,
	CONSTRAINT I2_PK PRIMARY KEY(ITEM_ID),
	CONSTRAINT O_FK FOREIGN KEY(ORDER_ID) REFERENCES OFF_ORDER,
	CONSTRAINT F2_FK FOREIGN KEY(FOOD_ID) REFERENCES FOOD
);



